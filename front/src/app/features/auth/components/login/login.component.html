<div class="login-container">
  <img class="logo" src="assets/img/mdd-logo.png" >
  <h3>Se connecter</h3>
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="email-container">
      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput
               placeholder="pat@example.com"
               formControlName="email"
               (blur)="updateErrorMessage()"
               required />
        <mat-error *ngIf="email?.invalid && email?.touched">
          {{ errorMessage }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="password-container">
      <mat-form-field appearance="fill">
        <mat-label>Mot de passe</mat-label>
        <input matInput
               [type]="hide ? 'password' : 'text'"
               formControlName="password"
               required />
        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Toggle password visibility'">
          <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="password?.invalid && password?.touched">
          Le mot de passe est requis et doit contenir au moins 3 caractères.
        </mat-error>
      </mat-form-field>
    </div>

    <button mat-raised-button color="primary" [disabled]="form.invalid">
      Se connecter
    </button>

    <div *ngIf="onError" class="error-message">
      Une erreur est survenue. Vérifiez vos identifiants.
    </div>

  </form>
</div>





